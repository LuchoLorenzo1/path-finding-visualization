const $=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}};$();class B{constructor(t,e=null){this.items=[],this.compare=e||this.__defaultCompare}push(t){this.items.push(t),this.heapifyUp(this.size-1)}pop(){if(this.size===0)return null;this.__swap(0,this.size-1);const t=this.items.pop();return this.heapifyDown(0),t}peek(){return this.size>0?this.items[0]:null}clear(){this.items.splice(0,this.size)}get size(){return this.items.length}heapifyDown(t){const e=t*2+1,s=t*2+2;if(e>this.size-1)return;let i=e;s<this.size&&this.compare(this.items[e],this.items[s])>0&&(i=s),this.compare(this.items[t],this.items[i])>0&&(this.__swap(t,i),this.heapifyDown(i))}heapifyUp(t){const e=Math.floor((t-1)/2);e>=0&&this.compare(this.items[e],this.items[t])>0&&(this.__swap(t,e),this.heapifyUp(e))}__defaultCompare(t,e){return t===e?0:t>e?1:-1}__swap(t,e){[this.items[t],this.items[e]]=[this.items[e],this.items[t]]}}class z{constructor(t,e,s,i=0){this.weight=s,this.id=`${t}:${e}`,this.x=t,this.y=e,this.actual=1/0,this.heuristic=i}}class L{constructor(t,e,s,i=!1,o=null){this.M=e,this.N=t,this.diagonals=i,this.matrix=[];for(let r=0;r<t;r++){let h=[];for(let u=0;u<e;u++){let p=0;o&&(p=o(r,u));let l=new z(r,u,s[r][u],p);h.push(l)}this.matrix.push(h)}}get(t,e){return 0<=t&&t<this.N&&0<=e&&e<this.M?this.matrix[t][e]:NaN}adjacents(t){let e;this.diagonals?e=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]]:e=[[0,1],[1,0],[-1,0],[0,-1]];let s=[];for(const i of e){let o=this.get(t.x+i[0],t.y+i[1]);s.push(o)}return s}}let E=null;class M{static get state(){return E||(E=new M)}constructor(){this._state={},window.Context=this}get state(){return this._state}set(t,e){this._state[t]=e}get(t){return this._state[t]}}const{state:d}=M,A=()=>{const n=d.get("N"),t=d.get("M"),e=d.get("weights"),s=d.get("origin"),i=d.get("destination"),o=new L(n,t,e,!1),r=o.get(s[0],s[1]),h=o.get(i[0],i[1]);r.actual=0,h.visited=!1;const u=new B([],(c,y)=>c.actual==y.actual?0:c.actual>y.actual?1:-1),p=[];let l=r;for(;!h.visited&&l;){for(const c of o.adjacents(l))c.actual>l.actual+c.weight&&(c.actual=l.actual+c.weight,c.lastVisited||(u.push(c),c.lastVisited=l));p.push([l.x,l.y]),l.visited=!0,l=u.pop()}const v=[];for(l=h.lastVisited;l.id!=r.id;)v.push([l.x,l.y]),l=l.lastVisited;return[p,v.reverse()]},V=()=>{const n=d.get("N"),t=d.get("M"),e=d.get("weights"),s=d.get("origin"),i=d.get("destination"),o=new L(n,t,e,!1,(c,y)=>Math.sqrt((i[0]-c)**2+(i[1]-y)**2)),r=o.get(s[0],s[1]),h=o.get(i[0],i[1]);r.actual=0,h.visited=!1;const u=new B([],(c,y)=>{let x=c.actual+c.heuristic-(y.actual+y.heuristic);return x==0?0:x>0?1:-1}),p=[];let l=r;for(;!h.visited&&l;){for(const c of o.adjacents(l))c.actual+c.heuristic>l.actual+l.heuristic+c.weight&&(c.actual=l.actual+c.weight,c.lastVisited||(u.push(c),c.lastVisited=l));p.push([l.x,l.y]),l.visited=!0,l=u.pop()}const v=[];for(l=h.lastVisited;l.id!=r.id;)v.push([l.x,l.y]),l=l.lastVisited;return[p,v.reverse()]},k=()=>{const n=d.get("N"),t=d.get("M"),e=d.get("weights"),s=d.get("origin"),i=d.get("destination"),o=new L(n,t,e),r=o.get(s[0],s[1]),h=o.get(i[0],i[1]);r.actual=0,h.visited=!1;const u=[];let p=r;const l=v=>{if(!h.visited){for(const c of o.adjacents(v))if(!c.visited&&c.weight<1/0&&c.id!=r.id){if(c.id==h.id){h.visited=!0;return}if(u.push([c.x,c.y]),c.visited=!0,l(c),h.visited)return}}};return u.push([p.x,p.y]),l(p),[u,u]},{state:w}=M,g=document.getElementById("canvas"),m=g.getContext("2d");w.set("ctx",m);m.globalAlpha=1;const N=1;let a;const R=(n,t)=>{a=new S(n,t)},D=()=>{a.weights=[];for(let n=0;n<a.N;n++){let t=[];for(let e=0;e<a.M;e++)t.push(N);a.weights.push(t)}m.clearRect(0,0,g.width,g.height),a.setObjects(),w.set("weights",a.weights)};class S{constructor(t,e){this.N=t,this.M=e,this.cellw=Math.floor(g.width/this.N),this.cellh=Math.floor(g.height/this.M),this.weights=[];for(let s=0;s<this.N;s++){let i=[];for(let o=0;o<this.M;o++)i.push(N);this.weights.push(i)}this.objects={origin:[5,5,"#00ff00"],destination:[20,20,"#ff0000"]},w.set("weights",this.weights),this.setObjects()}setObject(t,e,s){e>this.N-1||s>this.M-1||(this.clean(this.objects[t][0],this.objects[t][1]),w.set(t,[this.objects[t][0],this.objects[t][1]]),this.objects[t][0]=e,this.objects[t][1]=s,this.setObjects())}setObjects(){for(const t in this.objects)w.set(t,[this.objects[t][0],this.objects[t][1]]),this.paint(this.objects[t][0],this.objects[t][1],this.objects[t][2])}isObject(t,e){if(!(t>this.N-1||e>this.M-1)){for(const s in this.objects)if(this.objects[s][0]==t&&this.objects[s][1]==e)return s;return!1}}paint(t,e,s){m.fillStyle=s,m.fillRect(t*this.cellw,e*this.cellh,this.cellw,this.cellh)}weigh(t,e,s){t>this.N-1||e>this.M-1||(this.weights[t][e]=s,s==1/0?this.paint(t,e,"#000000"):this.paint(t,e,"#00ff00"))}clean(t,e){m.fillStyle="#ffffff",m.fillRect(t*this.cellw,e*this.cellh,this.cellw,this.cellh),this.weights[t][e]=N,w.set("weights",this.weights)}}let j=-1,b=null;window.addEventListener("mouseup",()=>{j=-1,b=null});g.addEventListener("mouseup",n=>{if(!b)return;const t=g.getBoundingClientRect();let e=Math.floor((n.clientX-t.left)/a.cellw),s=Math.floor((n.clientY-t.top)/a.cellh);a.setObject(b,e,s),b=null});const O=n=>{const t=g.getBoundingClientRect();let e=Math.floor((n.clientX-t.left)/a.cellw),s=Math.floor((n.clientY-t.top)/a.cellh);if(b){a.setObject(b,e,s);return}let i=a.isObject(e,s);if(i){b=i;return}let o=1/0;j==0?a.weigh(e,s,o):j==2&&a.clean(e,s)};g.addEventListener("mousedown",n=>{j=n.button,O(n)});g.addEventListener("mousemove",n=>{j!=-1&&O(n)});g.addEventListener("mouseleave",()=>{j=-1,b=null});g.addEventListener("contextmenu",n=>{n.preventDefault();const t=g.getBoundingClientRect();let e=Math.floor((n.clientX-t.left)/a.cellw),s=Math.floor((n.clientY-t.top)/a.cellh);a.isObject(e,s)||a.clean(e,s)});function G(n,t){let s=0;for(let i=1;i<n.length-1;i++){s+=1;let o=n[i];setTimeout(()=>{m.globalAlpha=.4;const[r,h]=o;a.paint(r,h,"#ff00ff"),m.globalAlpha=1},s)}s+=100;for(let i=0;i<t.length;i++){let o=t[i];setTimeout(()=>{m.globalAlpha=.9;const[r,h]=o;a.paint(r,h,"#ff0000"),m.globalAlpha=1},s),s+=1}setTimeout(()=>{w.set("animating",!1),w.set("isClean",!1)},s)}const{state:f}=M,C=new Map([["Dijkstra",A],["A*",V],["dfs",k]]);window.addEventListener("load",()=>{f.set("speed",4),f.set("N",100),f.set("M",100),f.set("origin",[0,1]),f.set("destination",[0,0]),f.set("animating",!1),f.set("isClean",!0),f.set("selectedWeight",1/0),R(f.get("N"),f.get("M"));const n=document.getElementById("select-algorithm");C.forEach((t,e)=>{const s=document.createElement("option");s.value=e,s.innerText=e,n.appendChild(s)})});document.getElementById("run").addEventListener("click",()=>{H()});const H=()=>{if(f.get("animating"))return;f.set("animating",!0),f.get("isClean")||D();const n=document.getElementById("select-algorithm"),t=C.get(n.value)();if(!t){f.set("animating",!1);return}G(t[0],t[1])},{state:T}=M,I=document.getElementById("menu-container"),U=document.getElementById("menu-button"),X=["algorithms","grid","terrain","nodes"];U.addEventListener("click",()=>{I.style.display=="none"?I.style.display="block":I.style.display="none"});document.getElementById("menu-options").addEventListener("click",n=>{let t=n.target.id.split("-");!X.includes(t[0])||Y(t[0])});let _="algorithms";function Y(n){_!=n&&(document.getElementById(`${_}-menu`).style.display="none",document.getElementById(`${n}-menu`).style.display="block",document.getElementById(`${_}-option`).classList.replace("active","inactive"),document.getElementById(`${n}-option`).classList.replace("inactive","active"),_=n)}document.getElementById("algorithm-speed-input").onchange=n=>{T.set("speed",n.target.value)};
