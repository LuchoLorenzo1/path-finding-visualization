const D=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};D();function k(t,e,n){const r=t.length,a=t[0].length,i=new Map;for(let s=0;s<r;s++)for(let l=0;l<a;l++)i.set(`${s}:${l}`,{peso:t[s][l],actual:1/0,camino:[]});const o=[],d=new Set;d.add(e),i.get(e).actual=0;let g=e;for(;!d.has(n)&&g;){let s=i.get(g),[l,f]=g.split(":");l=parseInt(l),f=parseInt(f);let y=[i.get(`${l+1}:${f}`),i.get(`${l}:${f+1}`),i.get(`${l-1}:${f}`),i.get(`${l}:${f-1}`)];for(const u of y)!u||s.actual+u.peso<u.actual&&(u.actual=s.actual+u.peso,u.camino=[...s.camino],u.camino.push(g));d.add(g),o.push(g),g=A(d,i)}let m=i.get(n);return m.camino.length==0?(alert("es imposible llegar a destino"),null):[o,m.camino]}function A(t,e){let n=1/0,r;for(const a of t){let i=e.get(a),[o,d]=a.split(":");o=parseInt(o),d=parseInt(d);let g=[`${o+1}:${d}`,`${o}:${d+1}`,`${o-1}:${d}`,`${o}:${d-1}`];for(const m of g){let s=e.get(m);!s||t.has(m)||i.actual+s.peso<n&&(n=i.actual+s.peso,r=m)}}return r}const v=40;function c(t,e){!t||(t.classList.remove(t.classList[1]),t.classList.add(e))}function T(d,g){const n=document.getElementById("grilla");let r=window.innerWidth,a=window.innerHeight,i=r/v;i<20&&(i=20);const o=Math.floor(a/i);var d=`${Math.floor(o/2)}:2`,g=`${Math.floor(o/2)}:${v-3}`;n.innerHTML="";for(let l=0;l<o;l++){const f=document.createElement("tr");for(let y=0;y<v;y++){const u=document.createElement("td"),C=document.createTextNode("");u.classList.add("celda"),u.classList.add("vacio"),u.setAttribute("id",`${l}:${y}`),u.appendChild(C),f.appendChild(u)}f.classList.add("fila"),n.appendChild(f)}let m=document.getElementById(d),s=document.getElementById(g);return c(m,"origen"),c(s,"destino"),m.setAttribute("draggable",!0),s.setAttribute("draggable",!0),[o,v,d,g]}function L(t){document.getElementById("grilla").childNodes.forEach(e=>{e.childNodes.forEach(n=>{(t||!n.classList.contains("wall"))&&c(n,"vacio")})}),j()}function j(){let t=document.getElementById(origen),e=document.getElementById(destino);c(t,"origen"),c(e,"destino"),t.setAttribute("draggable",!0),e.setAttribute("draggable",!0)}function x(t,e){let n=5,r=0;for(let a=1;a<t.length-1;a++){r+=n;let i=document.getElementById(t[a]);setTimeout(()=>{c(i,"visitados")},r)}r+=1e3;for(let a=1;a<e.length;a++){let i=document.getElementById(e[a]);setTimeout(()=>{c(i,"path")},r),r+=n}setTimeout(()=>{window.animating=!1,window.isClean=!1},r)}const b=1;window.M=0;const $=new Map([["Dijkstra",k]]);window.N=0;window.origen=void 0;window.destino=void 0;window.animating=!1;window.isClean=!0;var w=[];window.addEventListener("load",()=>{[N,M,origen,destino]=T(origen,destino);for(let e=0;e<N;e++){let n=[];for(let r=0;r<M;r++)n.push(b);w.push(n)}const t=document.getElementById("select-algorithm");$.forEach((e,n)=>{const r=document.createElement("option");r.value=n,r.innerText=n,t.appendChild(r)})});const p=document.getElementById("grilla");let I=!1;p.addEventListener("mousedown",t=>{if(window.animating||t.target.id==origen||t.target.id==destino)return;window.isClean||L(),I=!0;let[e,n]=t.target.id.split(":");w[+e][+n]=1/0,c(t.target,"wall")});window.addEventListener("mouseup",()=>{I=!1});p.addEventListener("mouseover",t=>{if(window.animating||!t.target.classList.contains("celda")||t.target.id==origen||t.target.id==destino||!I)return;let[e,n]=t.target.id.split(":");w[+e][+n]=1/0,c(t.target,"wall")});document.getElementById("clean-grilla").addEventListener("click",()=>{if(!window.animating){L(!0),w=[];for(let t=0;t<N;t++){let e=[];for(let n=0;n<M;n++)e.push(b);w.push(e)}window.isClean=!0}});p.addEventListener("contextmenu",t=>{if(t.preventDefault(),window.animating||t.target.id==origen||t.target.id==destino)return;let[e,n]=t.target.id.split(":");w[+e][+n]=b,c(t.target,"vacio")});function O(t,e){if(!!t){switch(e){case"origen":let n=document.getElementById(origen);n.setAttribute("draggable",!1),c(n,"vacio"),c(t,"origen"),origen=t.id;break;case"destino":let r=document.getElementById(destino);r.setAttribute("draggable",!1),c(r,"vacio"),c(t,"destino"),destino=t.id;break}t.setAttribute("draggable",!0)}}p.addEventListener("dragstart",t=>{if(!window.animating)if(t.target.id==origen)t.dataTransfer.setData("dragging","origen");else if(t.target.id==destino)t.dataTransfer.setData("dragging","destino");else return});p.addEventListener("dragenter",t=>{t.preventDefault(),!(window.animating||t.target.id==origen||t.target.id==destino||t.target.classList.contains("wall")||t.target.nodeName!="TD")&&t.target.classList.add("droppable")});p.addEventListener("dragover",t=>{t.preventDefault(),window.animating});p.addEventListener("dragleave",t=>{t.preventDefault(),!(t.target.id==origen||t.target.id==destino)&&t.target.classList.remove("droppable")});p.addEventListener("drop",t=>{if(window.animating||t.target.id==origen||t.target.id==destino||t.target.classList.contains("wall")||t.target.nodeName!="TD")return;const e=t.dataTransfer.getData("dragging");t.target.classList.remove("droppable"),O(t.target,e),e=="origen"&&!isClean&&B()});document.getElementById("run").addEventListener("click",()=>{B()});function B(){if(window.animating)return;window.animating=!0,window.isClean||L();const t=document.getElementById("select-algorithm"),e=$.get(t.value)(w,origen,destino);if(!e){window.animating=!1;return}x(e[0],e[1])}const E=document.getElementById("menu-container"),H=document.getElementById("menu-button"),W=["algorithms","grid","terrain","nodes"];H.addEventListener("click",()=>{E.style.display=="none"?E.style.display="block":E.style.display="none"});document.getElementById("menu-options").addEventListener("click",t=>{let e=t.target.id.split("-");!W.includes(e[0])||G(e[0])});let h="algorithms";function G(t){h!=t&&(document.getElementById(`${h}-menu`).style.display="none",document.getElementById(`${t}-menu`).style.display="block",document.getElementById(`${h}-option`).classList.replace("active","inactive"),document.getElementById(`${t}-option`).classList.replace("inactive","active"),h=t)}
