const D=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}};D();function A(t,e,i){const o=t.length,a=t[0].length,n=new Map;for(let s=0;s<o;s++)for(let c=0;c<a;c++)n.set(`${s}:${c}`,{peso:t[s][c],actual:1/0,camino:[]});const r=[],l=new Set;l.add(e),n.get(e).actual=0;let d=e;for(;!l.has(i)&&d;){let s=n.get(d),[c,h]=d.split(":");c=parseInt(c),h=parseInt(h);let E=[n.get(`${c+1}:${h}`),n.get(`${c}:${h+1}`),n.get(`${c-1}:${h}`),n.get(`${c}:${h-1}`)];for(const g of E)!g||s.actual+g.peso<g.actual&&(g.actual=s.actual+g.peso,g.camino=[...s.camino],g.camino.push(d));l.add(d),r.push(d),d=M(l,n)}let p=n.get(i);return p.camino.length==0?(alert("es imposible llegar a destino"),null):[r,[...p.camino]]}function M(t,e){let i=1/0,o;for(const a of t){let n=e.get(a),[r,l]=a.split(":");r=parseInt(r),l=parseInt(l);let d=[`${r+1}:${l}`,`${r}:${l+1}`,`${r-1}:${l}`,`${r}:${l-1}`];for(const p of d){let s=e.get(p);!s||t.has(p)||n.actual+s.peso<i&&(i=n.actual+s.peso,o=p)}}return o}const y=75;function k(l,d){const i=document.getElementById("grilla");let o=window.innerWidth,a=window.innerHeight,n=o/y;n<20&&(n=20);const r=Math.floor(a*.7/n);var l=`${Math.floor(r/2)}:2`,d=`${Math.floor(r/2)}:${y-3}`;console.log(r,y),i.innerHTML="";for(let c=0;c<r;c++){const h=document.createElement("tr");for(let E=0;E<y;E++){const g=document.createElement("td"),x=document.createTextNode("");g.classList.add("celda"),g.classList.add("vacio"),g.setAttribute("id",`${c}:${E}`),g.style.width=`${n}px`,g.style.height=`${n}px`,g.appendChild(x),h.appendChild(g)}h.classList.add("fila"),i.appendChild(h)}let p=document.getElementById(l),s=document.getElementById(d);return u(p,"origen"),u(s,"destino"),p.setAttribute("draggable",!0),s.setAttribute("draggable",!0),[r,y,l,d]}function j(t,e,i,o,a){for(let l=0;l<t;l++)for(let d=0;d<e;d++){const p=document.getElementById(`${l}:${d}`);i[l][d]==1&&u(p,"vacio")}let n=document.getElementById(o),r=document.getElementById(a);u(n,"origen"),u(r,"destino"),n.setAttribute("draggable",!0),r.setAttribute("draggable",!0)}function u(t,e){!t||(t.classList.remove(t.classList[1]),t.classList.add(e))}function T(){const t=document.getElementById("grilla"),e=window.innerWidth,i=window.innerHeight;let o=e/y,a=i*.7/N;t.childNodes.forEach(n=>{n.childNodes.forEach(r=>{r.style.width=`${o}px`,r.style.height=`${a}px`})})}function C(t,e){let i=1,o=1,a=0;for(let n=1;n<t.length-1;n++){a+=i;let r=document.getElementById(t[n]);r.animate([{background:"white"},{background:"orange"}],{duration:o,delay:a,iterations:"1"}).finished.then(()=>{u(r,"visitados")})}a+=50;for(let n=1;n<e.length;n++){a+=i;let r=document.getElementById(e[n]);r.animate([{background:"orange"},{background:"pink"}],{duration:o,delay:a,iterations:1}).finished.then(()=>{u(r,"path"),console.log(window.animating),window.animating=!1})}}const L=1,B=["Dijkstra","DFS","BFS","A*"];var b,$,f,m,v=[];window.animating=!1;window.addEventListener("load",()=>{[b,$,f,m]=k(f,m);for(let e=0;e<b;e++){let i=[];for(let o=0;o<$;o++)i.push(L);v.push(i)}const t=document.getElementById("select-algorithm");for(let e=0;e<B.length;e++){const i=document.createElement("option");i.value=e,i.innerText=B[e],t.appendChild(i)}});window.addEventListener("resize",()=>{T()});const w=document.getElementById("grilla");let I=!1;w.addEventListener("mousedown",t=>{if(window.animating||t.target.id==f||t.target.id==m)return;I=!0;let[e,i]=t.target.id.split(":");v[+e][+i]=1/0,u(t.target,"wall")});window.addEventListener("mouseup",()=>{I=!1});w.addEventListener("mouseover",t=>{if(window.animating||t.target.id==f||t.target.id==m||!I)return;let[e,i]=t.target.id.split(":");v[+e][+i]=1/0,u(t.target,"wall")});w.addEventListener("mouseout",()=>{});document.getElementById("clean-grilla").addEventListener("click",()=>{k(b,$),v=[];for(let t=0;t<b;t++){let e=[];for(let i=0;i<$;i++)e.push(L);v.push(e)}});w.addEventListener("contextmenu",t=>{if(t.preventDefault(),window.animating||t.target.id==f||t.target.id==m)return;let[e,i]=t.target.id.split(":");v[+e][+i]=L,u(t.target,"vacio")});function H(t,e){if(!!t){switch(e){case"origen":let i=document.getElementById(f);i.setAttribute("draggable",!1),u(i,"vacio"),u(t,"origen"),f=t.id;break;case"destino":let o=document.getElementById(m);o.setAttribute("draggable",!1),u(o,"vacio"),u(t,"destino"),m=t.id;break}t.setAttribute("draggable",!0)}}w.addEventListener("dragstart",t=>{if(!window.animating)if(t.target.id==f)t.dataTransfer.setData("dragging","origen");else if(t.target.id==m)t.dataTransfer.setData("dragging","destino");else return});w.addEventListener("dragenter",t=>{t.preventDefault(),!(window.animating||t.target.id==f||t.target.id==m||t.target.classList.contains("wall")||t.target.nodeName!="TD")&&t.target.classList.add("droppable")});w.addEventListener("dragover",t=>{t.preventDefault(),window.animating});w.addEventListener("dragleave",t=>{t.preventDefault(),!(t.target.id==f||t.target.id==m)&&t.target.classList.remove("droppable")});w.addEventListener("drop",t=>{if(window.animating||t.target.id==f||t.target.id==m||t.target.classList.contains("wall")||t.target.nodeName!="TD")return;const e=t.dataTransfer.getData("dragging");t.target.classList.remove("droppable"),H(t.target,e)});document.getElementById("start-algorithm").addEventListener("click",()=>{if(window.animating)return;window.animating=!0,j(b,$,v,f,m);const t=document.getElementById("select-algorithm");let e;switch(+t.value){case 0:e=A(v,f,m);break}!e||C(e[0],e[1])});
